-- Discord: The_Plaft
local Obby
-- Easy, Medium, Hard


local teleportnum

if Obby == "Easy" then
    teleportnum = "Teleport 1"
elseif Obby == "Medium" then
    teleportnum = "Teleport 2"
elseif Obby == "Hard" then
    teleportnum = "Teleport 3"
else
    print("No chosen obby")
    return
end

print("Chosen obby teleport:", teleportnum)


local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local player = game.Players.LocalPlayer

local previousPosition = nil

local function getPlayerPosition()

    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        return character.HumanoidRootPart.Position
    end
    return nil
end

local function teleportPlayerToPosition(position)

    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(position)
        print("Teleported", player, "To", position)
    end
end

local function teleportToObbyAndBack()
    local previousPos = getPlayerPosition()

    local door = workspace.Obby:FindFirstChild("BlockedDoor")
    if door then
        print("Waiting BlockedDoor")
    else

        
        local teleport = workspace.Obby:FindFirstChild(teleportnum)
        if teleport then
                local bunkerMesh = teleport:FindFirstChild("Meshes/obby+bunker_Cube.502")
            if bunkerMesh then

                teleportPlayerToPosition(bunkerMesh.Position)
                wait(1)


                if previousPos then
                    teleportPlayerToPosition(previousPos)
                end
            else
                print("No obby door")
            end
        else
            print("No obby folder")
        end
    end
end

local function main()
    while true do
        teleportToObbyAndBack()
        wait(10)
    end
end

main()
